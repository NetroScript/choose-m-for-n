import{_ as Lt}from"../chunks/preload-helper-8a997674.js";import{S as Wn,i as Qn,s as Xn,e as l,t as _,c as r,a as d,h as g,d as a,b as o,K as ve,g as Q,J as e,l as Pn,k as w,m as y,n as Ce,L as Fs,j as Zn,M as U,x as ht,y as Ks,z as ft,r as ge,p as Be,C as mt,N as ei,O as _e,P as Ye,q as Hs,w as ni,Q as ii,o as Ys}from"../chunks/index-28df49c0.js";const li=new Uint8Array([0,97,115,109,1,0,0,0,1,10,2,96,0,1,127,96,1,127,1,127,3,3,2,0,1,6,28,2,126,1,66,155,213,191,164,231,188,146,158,133,127,11,126,1,66,219,183,229,165,185,185,142,159,90,11,7,46,4,5,115,116,97,116,101,3,0,8,115,101,113,117,101,110,99,101,3,1,11,114,97,110,100,111,109,73,110,116,51,50,0,0,9,114,97,110,100,111,109,73,110,116,0,1,10,78,2,44,1,1,126,35,0,34,0,66,173,254,213,228,212,133,253,168,216,0,126,35,1,124,36,0,32,0,66,18,136,32,0,133,66,27,136,167,32,0,66,59,136,167,120,11,31,1,2,127,65,0,32,0,107,32,0,112,33,2,3,64,16,0,34,1,32,2,73,13,0,11,32,1,32,0,112,11]),ri=new WebAssembly.Module(li),Nt=new WebAssembly.Instance(ri),Ws=Nt.exports.state;Nt.exports.sequence;const ti=Nt.exports.randomInt32,ai=Nt.exports.randomInt,Bn=()=>ti()>>>0,Cn=n=>{if(n<1||n>4294967296)throw new RangeError("randomInt() bound must be between 1 and 2\xB3\xB2");return n===4294967296?ti()>>>0:ai(n)>>>0},oi=()=>BigInt.asUintN(64,Ws.value),Rn=(n=BigInt(Math.floor(Math.random()*2**53)))=>{Ws.value=0n,Bn(),Ws.value+=n,Bn()};function Sn(n,s,t){const i=n.slice();return i[1]=s[t],i[3]=t,i}function jn(n,s,t){const i=n.slice();return i[1]=s[t],i[3]=t,i}function On(n){let s,t=n[3]+1+"",i;return{c(){s=l("th"),i=_(t),this.h()},l(c){s=r(c,"TH",{class:!0});var p=d(s);i=g(p,t),p.forEach(a),this.h()},h(){o(s,"class","svelte-h0sbpi"),ve(s,"nth",n[0].prevent_grouped_assignments&&n[3]%n[0].multiples_of_n===0&&n[3]!==0)},m(c,p){Q(c,s,p),e(s,i)},p(c,p){p&1&&ve(s,"nth",c[0].prevent_grouped_assignments&&c[3]%c[0].multiples_of_n===0&&c[3]!==0)},d(c){c&&a(s)}}}function di(n){let s;return{c(){s=l("td"),this.h()},l(t){s=r(t,"TD",{class:!0}),d(s).forEach(a),this.h()},h(){o(s,"class","svelte-h0sbpi"),ve(s,"nth",n[0].prevent_grouped_assignments&&n[3]%n[0].multiples_of_n===0&&n[3]!==0)},m(t,i){Q(t,s,i)},p(t,i){i&1&&ve(s,"nth",t[0].prevent_grouped_assignments&&t[3]%t[0].multiples_of_n===0&&t[3]!==0)},d(t){t&&a(s)}}}function ci(n){let s,t=n[0].distribution.get(n[3])+"",i;return{c(){s=l("td"),i=_(t),this.h()},l(c){s=r(c,"TD",{class:!0});var p=d(s);i=g(p,t),p.forEach(a),this.h()},h(){o(s,"class","bg-primary-focus svelte-h0sbpi"),ve(s,"nth",n[0].prevent_grouped_assignments&&n[3]%n[0].multiples_of_n===0&&n[3]!==0)},m(c,p){Q(c,s,p),e(s,i)},p(c,p){p&1&&t!==(t=c[0].distribution.get(c[3])+"")&&Zn(i,t),p&1&&ve(s,"nth",c[0].prevent_grouped_assignments&&c[3]%c[0].multiples_of_n===0&&c[3]!==0)},d(c){c&&a(s)}}}function Mn(n){let s,t;function i(v,m){return m&1&&(s=null),s==null&&(s=!!v[0].distribution.has(v[3])),s?ci:di}let c=i(n,-1),p=c(n);return{c(){p.c(),t=Pn()},l(v){p.l(v),t=Pn()},m(v,m){p.m(v,m),Q(v,t,m)},p(v,m){c===(c=i(v,m))&&p?p.p(v,m):(p.d(1),p=c(v),p&&(p.c(),p.m(t.parentNode,t)))},d(v){p.d(v),v&&a(t)}}}function ui(n){let s,t,i,c,p,v,m,I=Array(n[0].choices),b=[];for(let h=0;h<I.length;h+=1)b[h]=On(jn(n,I,h));let A=Array(n[0].choices),E=[];for(let h=0;h<A.length;h+=1)E[h]=Mn(Sn(n,A,h));return{c(){s=l("div"),t=l("table"),i=l("thead"),c=l("tr");for(let h=0;h<b.length;h+=1)b[h].c();p=w(),v=l("tbody"),m=l("tr");for(let h=0;h<E.length;h+=1)E[h].c();this.h()},l(h){s=r(h,"DIV",{class:!0});var k=d(s);t=r(k,"TABLE",{class:!0});var u=d(t);i=r(u,"THEAD",{});var x=d(i);c=r(x,"TR",{});var j=d(c);for(let R=0;R<b.length;R+=1)b[R].l(j);j.forEach(a),x.forEach(a),p=y(u),v=r(u,"TBODY",{});var ne=d(v);m=r(ne,"TR",{});var ie=d(m);for(let R=0;R<E.length;R+=1)E[R].l(ie);ie.forEach(a),ne.forEach(a),u.forEach(a),k.forEach(a),this.h()},h(){o(t,"class","table w-full text-center"),o(s,"class","overflow-x-auto mt-3")},m(h,k){Q(h,s,k),e(s,t),e(t,i),e(i,c);for(let u=0;u<b.length;u+=1)b[u].m(c,null);e(t,p),e(t,v),e(v,m);for(let u=0;u<E.length;u+=1)E[u].m(m,null)},p(h,[k]){if(k&1){I=Array(h[0].choices);let u;for(u=0;u<I.length;u+=1){const x=jn(h,I,u);b[u]?b[u].p(x,k):(b[u]=On(x),b[u].c(),b[u].m(c,null))}for(;u<b.length;u+=1)b[u].d(1);b.length=I.length}if(k&1){A=Array(h[0].choices);let u;for(u=0;u<A.length;u+=1){const x=Sn(h,A,u);E[u]?E[u].p(x,k):(E[u]=Mn(x),E[u].c(),E[u].m(m,null))}for(;u<E.length;u+=1)E[u].d(1);E.length=A.length}},i:Ce,o:Ce,d(h){h&&a(s),Fs(b,h),Fs(E,h)}}}function hi(n,s,t){let{distribution:i}=s;return n.$$set=c=>{"distribution"in c&&t(0,i=c.distribution)},[i]}class fi extends Wn{constructor(s){super(),Qn(this,s,hi,ui,Xn,{distribution:0})}}const Gn=`// Algorithm 1:
let distribution = new Map();
let assigned = 0;

// Choices is the total number of choices, set in the app
// Assignments is the total number of assignments done to the choices, set in the app
// multiples_of_n is the group size which is used, where in one group only 1 pick is allowed
// prevent_grouped_assignments is a boolean which determines if multiples_of_n is used

outer_loop:
  while (assigned < assignments) {
    /**
     * Returns a uniformly distributed 32-bit unsigned random integer in the range
     * [0, bound).
     */
    let random_number = randomInt(choices);
    if (!distribution.has(random_number)) {

      if (prevent_grouped_assignments && multiples_of_n > 1) {
        // Get the base for multiples of n for the current random number
        let base = random_number - random_number % multiples_of_n;

        // If any of the base numbers already exist, skip this random number and try again
        for (let i = 0; i < multiples_of_n; i++) {
          if (distribution.has(base + i)) {
            continue outer_loop;
          }
        }
      }
      distribution.set(random_number, assigned + 1);
      assigned++;
    }
  }
`,Un=`// Algorithm 2:
let distribution = new Map();
let assigned = 0;

const possible_picks = [];
for (let i = 0; i < choices; i++) {
  possible_picks.push(i);
}

outer_loop:
  while (assigned < assignments) {
    // Randomly choose and index which will later be removed from the list
    let random_index = randomInt(possible_picks.length);

    // Check if we have additional rules we have to watch out for
    if (prevent_grouped_assignments && multiples_of_n > 1) {
      // Get the base for multiples of n for the current random number
      let base = possible_picks[random_index] - possible_picks[random_index] % multiples_of_n;

      // If any of the base numbers already exist, skip this random number and try again
      for (let i = 0; i < multiples_of_n; i++) {
        if (distribution.has(base + i)) {
          continue outer_loop;
        }
      }
    }

    // If the pick is valid, add it to the distribution
    distribution.set(possible_picks[random_index], assigned + 1);
    // Remove it from the temporary array with all possible entries
    // Because splice is very slow, we rearrange the last element to the current position and just remove the last element
    possible_picks[random_index] = possible_picks[possible_picks.length - 1];
    possible_picks.pop();
    assigned++;
  }
`;const{window:mi}=ii;function Jn(n,s,t){const i=n.slice();return i[31]=s[t],i[33]=t,i}function qn(n){let s,t;return{c(){s=l("h4"),t=_(`You have set very high values for the generation of the distribution.
                        This will still work, but was not optimized for it.`),this.h()},l(i){s=r(i,"H4",{class:!0});var c=d(s);t=g(c,`You have set very high values for the generation of the distribution.
                        This will still work, but was not optimized for it.`),c.forEach(a),this.h()},h(){o(s,"class","mt-4 opacity-80")},m(i,c){Q(i,s,c),e(s,t)},d(i){i&&a(s)}}}function zn(n){let s,t,i,c,p;return{c(){s=l("div"),t=l("div"),i=_("Benchmark"),this.h()},l(v){s=r(v,"DIV",{class:!0});var m=d(s);t=r(m,"DIV",{class:!0});var I=d(t);i=g(I,"Benchmark"),I.forEach(a),m.forEach(a),this.h()},h(){o(t,"class","btn btn-primary btn-wide"),o(s,"class","flex justify-center m-2")},m(v,m){Q(v,s,m),e(s,t),e(t,i),c||(p=U(s,"click",n[13]),c=!0)},p:Ce,d(v){v&&a(s),c=!1,p()}}}function Hn(n){let s,t,i,c,p,v;return{c(){s=l("div"),t=l("div"),i=l("div"),c=_("Clear distributions"),this.h()},l(m){s=r(m,"DIV",{class:!0,"data-tip":!0});var I=d(s);t=r(I,"DIV",{class:!0});var b=d(t);i=r(b,"DIV",{class:!0});var A=d(i);c=g(A,"Clear distributions"),A.forEach(a),b.forEach(a),I.forEach(a),this.h()},h(){o(i,"class","btn btn-primary btn-wide"),o(t,"class","flex justify-center m-2"),o(s,"class","tooltip tooltip-primary"),o(s,"data-tip","This removes all currently generated distributions and additionally resets the seed to a new random value.")},m(m,I){Q(m,s,I),e(s,t),e(t,i),e(i,c),p||(v=U(t,"click",n[14]),p=!0)},p:Ce,d(m){m&&a(s),p=!1,v()}}}function Yn(n){let s,t,i=n[33]+1+"",c,p,v,m,I;return m=new fi({props:{distribution:n[31]}}),{c(){s=l("div"),t=l("button"),c=_(i),p=w(),v=l("div"),ht(m.$$.fragment),this.h()},l(b){s=r(b,"DIV",{class:!0});var A=d(s);t=r(A,"BUTTON",{class:!0});var E=d(t);c=g(E,i),E.forEach(a),p=y(A),v=r(A,"DIV",{class:!0});var h=d(v);Ks(m.$$.fragment,h),h.forEach(a),A.forEach(a),this.h()},h(){o(t,"class","btn btn-secondary no-animation btn-circle mr-3 hover:bg-secondary cursor-default"),o(v,"class","flex-1"),o(s,"class","flex justify-items-center items-center overflow-x-auto")},m(b,A){Q(b,s,A),e(s,t),e(t,c),e(s,p),e(s,v),ft(m,v,null),I=!0},p(b,A){const E={};A[0]&512&&(E.distribution=b[31]),m.$set(E)},i(b){I||(ge(m.$$.fragment,b),I=!0)},o(b){Be(m.$$.fragment,b),I=!1},d(b){b&&a(s),mt(m)}}}function Fn(n){let s,t,i,c,p,v,m,I,b,A,E;return{c(){s=l("div"),t=l("div"),i=l("div"),c=l("div"),p=_("Export as a CSV file"),v=w(),m=l("div"),I=l("div"),b=_("Export as a JSON file"),this.h()},l(h){s=r(h,"DIV",{class:!0});var k=d(s);t=r(k,"DIV",{class:!0});var u=d(t);i=r(u,"DIV",{class:!0});var x=d(i);c=r(x,"DIV",{class:!0});var j=d(c);p=g(j,"Export as a CSV file"),j.forEach(a),x.forEach(a),v=y(u),m=r(u,"DIV",{class:!0});var ne=d(m);I=r(ne,"DIV",{class:!0});var ie=d(I);b=g(ie,"Export as a JSON file"),ie.forEach(a),ne.forEach(a),u.forEach(a),k.forEach(a),this.h()},h(){o(c,"class","btn btn-primary btn-wide"),o(i,"class","flex justify-center m-2"),o(I,"class","btn btn-primary btn-wide"),o(m,"class","flex justify-center m-2"),o(t,"class","flex flex-col md:flex-row justify-center "),o(s,"class","mt-6 mb-10")},m(h,k){Q(h,s,k),e(s,t),e(t,i),e(i,c),e(c,p),e(t,v),e(t,m),e(m,I),e(I,b),A||(E=[U(i,"click",n[16]),U(m,"click",n[17])],A=!0)},p:Ce,d(h){h&&a(s),A=!1,ei(E)}}}function pi(n){let s;return{c(){s=_(Gn)},l(t){s=g(t,Gn)},m(t,i){Q(t,s,i)},p:Ce,d(t){t&&a(s)}}}function bi(n){let s;return{c(){s=_(Un)},l(t){s=g(t,Un)},m(t,i){Q(t,s,i)},p:Ce,d(t){t&&a(s)}}}function _i(n){let s,t,i,c,p,v,m,I,b,A,E,h,k,u,x,j,ne,ie,R,Fe,le,ce,X,Ke,Re,We,Qe,J,Xe,Ze,he,re,fe,N,S,T,L,$,Z,q,pt,Pt,we,Se,ae,je,Bt,Ct,me,Rt,Oe,St,jt,Me,ee,ye,Ge,Ot,Mt,bt,Gt,_t,gt,oe,ke,Ut,Jt,Ue,te,et,qt,zt,tt,Ht,Yt,Ee,Ft,Ie,Kt,Wt,Qt,F,Xt,Zt,es,ts,ss,st,ns,is,ls,rs,as,V,nt,os,ds,it,cs,us,lt,hs,fs,Ae,ms,Je,ps,bs,_s,rt,gs,vs,ws,ys,ks,at,Es,Is,As,Ds,Vs,W,ot,Ts,$s,dt,xs,Ls,ct,Ns,Ps,De,Bs,qe,Cs,Rs,Ss,ut,js,Os,Ms,Gs,Us,pe,Ve,O,Js,Te,M,$e,qs,Qs,K=n[10]&&qn(),z=n[3]&&zn(n),H=n[9].length>0&&Hn(n),xe=n[9],C=[];for(let f=0;f<xe.length;f+=1)C[f]=Yn(Jn(n,xe,f));const si=f=>Be(C[f],1,1,()=>{C[f]=null});let Y=n[9].length>0&&Fn(n);var Le=n[2];function Xs(f){return{props:{showLineNumbers:!0,$$slots:{default:[pi]},$$scope:{ctx:f}}}}Le&&(O=new Le(Xs(n)));var Ne=n[2];function Zs(f){return{props:{showLineNumbers:!0,$$slots:{default:[bi]},$$scope:{ctx:f}}}}return Ne&&(M=new Ne(Zs(n))),{c(){s=l("div"),t=l("div"),i=l("div"),c=l("h2"),p=_("Generate m random assignments for n possible choices"),v=w(),m=l("h3"),I=_(`This website is using
                `),b=l("input"),A=_(`
                as a seed. The seed value gets randomized on every page load and cannot be changed and is only shown for
                reproducible results.`),E=w(),h=l("div"),k=l("div"),u=l("div"),x=l("label"),j=l("span"),ne=_("Enter the amount of total choices:"),ie=w(),R=l("input"),Fe=w(),le=l("div"),ce=l("label"),X=l("span"),Ke=_("Select the amount of possible assignments. (Maximum "),Re=_(n[0]),We=_(`
                                )`),Qe=w(),J=l("input"),Xe=w(),K&&K.c(),Ze=w(),he=l("div"),re=l("div"),fe=l("div"),N=l("label"),S=l("span"),T=_("Prevent multiple assignments in a group of "),L=l("input"),$=_(" choices."),Z=w(),q=l("input"),Pt=w(),we=l("div"),Se=l("div"),ae=l("label"),je=l("span"),Bt=_("Algorithm 1."),Ct=w(),me=l("input"),Rt=w(),Oe=l("span"),St=_("Algorithm 2."),jt=w(),Me=l("div"),ee=l("div"),ye=l("div"),Ge=l("div"),Ot=_("Generate distribution"),Mt=w(),z&&z.c(),bt=w(),H&&H.c(),Gt=w();for(let f=0;f<C.length;f+=1)C[f].c();_t=w(),Y&&Y.c(),gt=w(),oe=l("div"),ke=l("div"),Ut=_("Click to get more information about how this works."),Jt=w(),Ue=l("div"),te=l("div"),et=l("p"),qt=_("This application allows you to generate random distributions to assign m values to n possible choices. Assuming you know the seed and do the same actions, every sequence of distributions is reproducible."),zt=w(),tt=l("p"),Ht=_("You can export the generated distributions as a CSV file or as a JSON file."),Yt=w(),Ee=l("p"),Ft=_("As source of randomness the PCG-Family - specifically the 32-bit variant - is used. The specific library used on this website can be found "),Ie=l("a"),Kt=_("here"),Wt=_("."),Qt=w(),F=l("div"),Xt=_(`There are two algorithms available which are used to generate the assignments.
                            `),Zt=l("br"),es=w(),ts=l("br"),ss=w(),st=l("b"),ns=_("Algorithm 1"),is=_(` works the following way:
                            `),ls=l("br"),rs=l("br"),as=w(),V=l("ol"),nt=l("li"),os=_("As long as not m assignments were made."),ds=w(),it=l("li"),cs=_("Pick a random integer number in the range of 0-(n-1) (unbiased)."),us=w(),lt=l("li"),hs=_("Check if this number was picked before. If it was picked before do nothing and return to 2."),fs=w(),Ae=l("li"),ms=_("Now check if we are preventing groups. If we are preventing groups, get the relative base number for our current group of n "),Je=l("code"),ps=_("(random_number - random_number % multiples_of_n)"),bs=_('. Check if relative to this number in the group of n number, a pick already was made. If there is one in this range, "discard" the value again and return to step 2. again.'),_s=w(),rt=l("li"),gs=_("The current random number passsed all checks, so we can use it. Add it to the used random numbers (assign the possible value the index of the current iteration). And increase the amount of assigned numbers."),vs=w(),ws=l("br"),ys=l("br"),ks=w(),at=l("b"),Es=_("Algorithm 2"),Is=_(` on the other hand does not always randomly draw a new number in the entire range, but keeps a list of all possible choices and draws from them.
                                `),As=l("br"),Ds=l("br"),Vs=w(),W=l("ol"),ot=l("li"),Ts=_("Generate a list of all possible choices (0-(n-1))."),$s=w(),dt=l("li"),xs=_("As long as not m assignments were made."),Ls=w(),ct=l("li"),Ns=_("Pick a random integer number in the range of 0-(possible choices left - 1)."),Ps=w(),De=l("li"),Bs=_("Now check if we are preventing groups. If we are preventing groups, get the relative base number for our current group of n "),qe=l("code"),Cs=_("possible_picks[random_index] - possible_picks[random_index] % multiples_of_n"),Rs=_('. Check if relative to this number in the group of n number, a pick already was made. If there is one in this range, "discard" the value again and return to step 2. again.'),Ss=w(),ut=l("li"),js=_("The current random number passed all checks, so we can use it. Add it to the used random numbers (assign the possible value the index of the current iteration). Next remove it from the pool of possible choices. As last step increase the amount of assigned numbers."),Os=w(),Ms=l("br"),Gs=l("br"),Us=_(`

                            The algorithms roughly look like this in this application:

                            `),pe=l("div"),Ve=l("div"),O&&ht(O.$$.fragment),Js=w(),Te=l("div"),M&&ht(M.$$.fragment),this.h()},l(f){s=r(f,"DIV",{class:!0});var D=d(s);t=r(D,"DIV",{class:!0});var ue=d(t);i=r(ue,"DIV",{class:!0});var G=d(i);c=r(G,"H2",{class:!0});var B=d(c);p=g(B,"Generate m random assignments for n possible choices"),B.forEach(a),v=y(G),m=r(G,"H3",{});var Pe=d(m);I=g(Pe,`This website is using
                `),b=r(Pe,"INPUT",{class:!0}),A=g(Pe,`
                as a seed. The seed value gets randomized on every page load and cannot be changed and is only shown for
                reproducible results.`),Pe.forEach(a),E=y(G),h=r(G,"DIV",{class:!0});var vt=d(h);k=r(vt,"DIV",{class:!0});var wt=d(k);u=r(wt,"DIV",{class:!0});var yt=d(u);x=r(yt,"LABEL",{class:!0});var en=d(x);j=r(en,"SPAN",{class:!0});var tn=d(j);ne=g(tn,"Enter the amount of total choices:"),tn.forEach(a),en.forEach(a),ie=y(yt),R=r(yt,"INPUT",{class:!0,min:!0,placeholder:!0,type:!0}),yt.forEach(a),Fe=y(wt),le=r(wt,"DIV",{class:!0});var kt=d(le);ce=r(kt,"LABEL",{class:!0});var sn=d(ce);X=r(sn,"SPAN",{class:!0});var Et=d(X);Ke=g(Et,"Select the amount of possible assignments. (Maximum "),Re=g(Et,n[0]),We=g(Et,`
                                )`),Et.forEach(a),sn.forEach(a),Qe=y(kt),J=r(kt,"INPUT",{class:!0,max:!0,min:!0,placeholder:!0,type:!0}),kt.forEach(a),wt.forEach(a),Xe=y(vt),K&&K.l(vt),vt.forEach(a),Ze=y(G),he=r(G,"DIV",{class:!0});var nn=d(he);re=r(nn,"DIV",{class:!0,"data-tip":!0});var ln=d(re);fe=r(ln,"DIV",{class:!0});var rn=d(fe);N=r(rn,"LABEL",{class:!0});var It=d(N);S=r(It,"SPAN",{class:!0});var At=d(S);T=g(At,"Prevent multiple assignments in a group of "),L=r(At,"INPUT",{class:!0,type:!0}),$=g(At," choices."),At.forEach(a),Z=y(It),q=r(It,"INPUT",{class:!0,type:!0}),It.forEach(a),rn.forEach(a),ln.forEach(a),nn.forEach(a),Pt=y(G),we=r(G,"DIV",{class:!0,"data-tip":!0});var an=d(we);Se=r(an,"DIV",{class:!0});var on=d(Se);ae=r(on,"LABEL",{class:!0});var ze=d(ae);je=r(ze,"SPAN",{class:!0});var dn=d(je);Bt=g(dn,"Algorithm 1."),dn.forEach(a),Ct=y(ze),me=r(ze,"INPUT",{class:!0,type:!0}),Rt=y(ze),Oe=r(ze,"SPAN",{class:!0});var cn=d(Oe);St=g(cn,"Algorithm 2."),cn.forEach(a),ze.forEach(a),on.forEach(a),an.forEach(a),jt=y(G),Me=r(G,"DIV",{class:!0});var un=d(Me);ee=r(un,"DIV",{class:!0});var He=d(ee);ye=r(He,"DIV",{class:!0});var hn=d(ye);Ge=r(hn,"DIV",{class:!0});var fn=d(Ge);Ot=g(fn,"Generate distribution"),fn.forEach(a),hn.forEach(a),Mt=y(He),z&&z.l(He),bt=y(He),H&&H.l(He),He.forEach(a),un.forEach(a),Gt=y(G);for(let zs=0;zs<C.length;zs+=1)C[zs].l(G);_t=y(G),Y&&Y.l(G),gt=y(G),oe=r(G,"DIV",{class:!0});var Dt=d(oe);ke=r(Dt,"DIV",{class:!0});var mn=d(ke);Ut=g(mn,"Click to get more information about how this works."),mn.forEach(a),Jt=y(Dt),Ue=r(Dt,"DIV",{class:!0});var pn=d(Ue);te=r(pn,"DIV",{class:!0});var be=d(te);et=r(be,"P",{});var bn=d(et);qt=g(bn,"This application allows you to generate random distributions to assign m values to n possible choices. Assuming you know the seed and do the same actions, every sequence of distributions is reproducible."),bn.forEach(a),zt=y(be),tt=r(be,"P",{});var _n=d(tt);Ht=g(_n,"You can export the generated distributions as a CSV file or as a JSON file."),_n.forEach(a),Yt=y(be),Ee=r(be,"P",{});var Vt=d(Ee);Ft=g(Vt,"As source of randomness the PCG-Family - specifically the 32-bit variant - is used. The specific library used on this website can be found "),Ie=r(Vt,"A",{class:!0,href:!0});var gn=d(Ie);Kt=g(gn,"here"),gn.forEach(a),Wt=g(Vt,"."),Vt.forEach(a),Qt=y(be),F=r(be,"DIV",{});var se=d(F);Xt=g(se,`There are two algorithms available which are used to generate the assignments.
                            `),Zt=r(se,"BR",{}),es=y(se),ts=r(se,"BR",{}),ss=y(se),st=r(se,"B",{});var vn=d(st);ns=g(vn,"Algorithm 1"),vn.forEach(a),is=g(se,` works the following way:
                            `),ls=r(se,"BR",{}),rs=r(se,"BR",{}),as=y(se),V=r(se,"OL",{class:!0});var P=d(V);nt=r(P,"LI",{});var wn=d(nt);os=g(wn,"As long as not m assignments were made."),wn.forEach(a),ds=y(P),it=r(P,"LI",{});var yn=d(it);cs=g(yn,"Pick a random integer number in the range of 0-(n-1) (unbiased)."),yn.forEach(a),us=y(P),lt=r(P,"LI",{});var kn=d(lt);hs=g(kn,"Check if this number was picked before. If it was picked before do nothing and return to 2."),kn.forEach(a),fs=y(P),Ae=r(P,"LI",{});var Tt=d(Ae);ms=g(Tt,"Now check if we are preventing groups. If we are preventing groups, get the relative base number for our current group of n "),Je=r(Tt,"CODE",{class:!0});var En=d(Je);ps=g(En,"(random_number - random_number % multiples_of_n)"),En.forEach(a),bs=g(Tt,'. Check if relative to this number in the group of n number, a pick already was made. If there is one in this range, "discard" the value again and return to step 2. again.'),Tt.forEach(a),_s=y(P),rt=r(P,"LI",{});var In=d(rt);gs=g(In,"The current random number passsed all checks, so we can use it. Add it to the used random numbers (assign the possible value the index of the current iteration). And increase the amount of assigned numbers."),In.forEach(a),vs=y(P),ws=r(P,"BR",{}),ys=r(P,"BR",{}),ks=y(P),at=r(P,"B",{});var An=d(at);Es=g(An,"Algorithm 2"),An.forEach(a),Is=g(P,` on the other hand does not always randomly draw a new number in the entire range, but keeps a list of all possible choices and draws from them.
                                `),As=r(P,"BR",{}),Ds=r(P,"BR",{}),Vs=y(P),W=r(P,"OL",{class:!0});var de=d(W);ot=r(de,"LI",{});var Dn=d(ot);Ts=g(Dn,"Generate a list of all possible choices (0-(n-1))."),Dn.forEach(a),$s=y(de),dt=r(de,"LI",{});var Vn=d(dt);xs=g(Vn,"As long as not m assignments were made."),Vn.forEach(a),Ls=y(de),ct=r(de,"LI",{});var Tn=d(ct);Ns=g(Tn,"Pick a random integer number in the range of 0-(possible choices left - 1)."),Tn.forEach(a),Ps=y(de),De=r(de,"LI",{});var $t=d(De);Bs=g($t,"Now check if we are preventing groups. If we are preventing groups, get the relative base number for our current group of n "),qe=r($t,"CODE",{class:!0});var $n=d(qe);Cs=g($n,"possible_picks[random_index] - possible_picks[random_index] % multiples_of_n"),$n.forEach(a),Rs=g($t,'. Check if relative to this number in the group of n number, a pick already was made. If there is one in this range, "discard" the value again and return to step 2. again.'),$t.forEach(a),Ss=y(de),ut=r(de,"LI",{});var xn=d(ut);js=g(xn,"The current random number passed all checks, so we can use it. Add it to the used random numbers (assign the possible value the index of the current iteration). Next remove it from the pool of possible choices. As last step increase the amount of assigned numbers."),xn.forEach(a),de.forEach(a),Os=y(P),Ms=r(P,"BR",{}),Gs=r(P,"BR",{}),Us=g(P,`

                            The algorithms roughly look like this in this application:

                            `),pe=r(P,"DIV",{class:!0});var xt=d(pe);Ve=r(xt,"DIV",{class:!0});var Ln=d(Ve);O&&Ks(O.$$.fragment,Ln),Ln.forEach(a),Js=y(xt),Te=r(xt,"DIV",{class:!0});var Nn=d(Te);M&&Ks(M.$$.fragment,Nn),Nn.forEach(a),xt.forEach(a),P.forEach(a),se.forEach(a),be.forEach(a),pn.forEach(a),Dt.forEach(a),G.forEach(a),ue.forEach(a),D.forEach(a),this.h()},h(){o(c,"class","mt-20 mb-2 text-4xl font-extrabold md:text-6xl"),o(b,"class","input input-ghost input-xs border-0 border-b-2 border-primary"),o(j,"class","label-text text-xl text-secondary-content"),o(x,"class","label"),o(R,"class","input input-bordered input-primary w-full max-w-md input-lg"),o(R,"min","1"),o(R,"placeholder","Total choices"),o(R,"type","number"),o(u,"class","bg-secondary rounded-lg px-8 py-4 shadow-lg form-control w-full max-w-md flex-column flex justify-between items-center place-items-center m-4"),o(X,"class","label-text text-xl text-secondary-content"),o(ce,"class","label"),o(J,"class","input input-bordered input-primary w-full max-w-md input-lg"),o(J,"max",n[0]),o(J,"min","1"),o(J,"placeholder","Amount of assignments"),o(J,"type","number"),o(le,"class","bg-secondary rounded-lg px-8 py-4 shadow-lg form-control w-full max-w-md flex-column flex justify-between items-center place-items-center m-4"),o(k,"class","flex flex-col md:flex-row justify-center items-center place-items-center"),o(h,"class","mt-8"),o(L,"class","input input-ghost input-xs p-0 w-3 remove-wheel border-0 border-b-2 border-primary svelte-wgup4k"),o(L,"type","number"),o(S,"class","label-text"),o(q,"class","toggle toggle-primary ml-8"),o(q,"type","checkbox"),o(N,"class","label cursor-pointer"),o(fe,"class","form-control"),o(re,"class","tooltip tooltip-primary"),o(re,"data-tip",pt="This is for the use case that if you for example assign tasks to a user, that a single user should not have more than one task. If this toggle is enabled, any new random value which would be within a group of "+n[7]+" which already has an assignment will be discarded."),o(he,"class","mt-6 mb-10 flex w-full justify-center"),o(je,"class","label-text"),o(me,"class","toggle toggle-primary mx-8 bg-primary border-primary"),o(me,"type","checkbox"),o(Oe,"class","label-text"),o(ae,"class","label cursor-pointer"),o(Se,"class","form-control"),o(we,"class","tooltip tooltip-primary"),o(we,"data-tip","Algorithm 1 is a simpler, but a bit slower algorithm [For smaller numbers the difference in speed between both algorithms is negligent]. You just randomly keep drawing numbers in the range of 0-(n-1) and discard every newly generated number, if it does not fit the requirements. Algorithm 2 generates a list with all possible values. It then randomly selects a value from that list, checks if it is valid, if this is the case uses that value and removes it from the list of possible values. If it is not valid, it just picks a new random array element."),o(Ge,"class","btn btn-primary btn-wide"),o(ye,"class","flex justify-center m-2"),o(ee,"class","flex flex-col md:flex-row justify-center "),o(Me,"class","mt-6 mb-10"),o(ke,"class","collapse-title text-xl font-medium cursor-pointer"),o(Ie,"class","link link-accent"),o(Ie,"href","https://github.com/alisey/pcg32"),o(Je,"class","bg-base-200"),o(qe,"class","bg-base-200"),o(W,"class","list-decimal"),o(Ve,"class","m-4 overflow-x-auto flex-1"),o(Te,"class","m-4 overflow-x-auto flex-1"),o(pe,"class","flex flex-col 2xl:flex-row justify-center overflow-hidden"),o(V,"class","list-decimal"),o(te,"class","p-6"),o(Ue,"class","collapse-content text-left overflow-hidden"),o(oe,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-box"),ve(oe,"collapse-open",n[4]),o(i,"class","max-w-full"),o(t,"class","hero-content mx-auto max-w-full text-center overflow-hidden"),o(s,"class","hero bg-neutral text-neutral-content min-h-screen")},m(f,D){Q(f,s,D),e(s,t),e(t,i),e(i,c),e(c,p),e(i,v),e(i,m),e(m,I),e(m,b),_e(b,n[6]),e(m,A),e(i,E),e(i,h),e(h,k),e(k,u),e(u,x),e(x,j),e(j,ne),e(u,ie),e(u,R),_e(R,n[0]),e(k,Fe),e(k,le),e(le,ce),e(ce,X),e(X,Ke),e(X,Re),e(X,We),e(le,Qe),e(le,J),_e(J,n[1]),e(h,Xe),K&&K.m(h,null),e(i,Ze),e(i,he),e(he,re),e(re,fe),e(fe,N),e(N,S),e(S,T),e(S,L),_e(L,n[7]),e(S,$),e(N,Z),e(N,q),q.checked=n[8],e(i,Pt),e(i,we),e(we,Se),e(Se,ae),e(ae,je),e(je,Bt),e(ae,Ct),e(ae,me),me.checked=n[5],e(ae,Rt),e(ae,Oe),e(Oe,St),e(i,jt),e(i,Me),e(Me,ee),e(ee,ye),e(ye,Ge),e(Ge,Ot),e(ee,Mt),z&&z.m(ee,null),e(ee,bt),H&&H.m(ee,null),e(i,Gt);for(let ue=0;ue<C.length;ue+=1)C[ue].m(i,null);e(i,_t),Y&&Y.m(i,null),e(i,gt),e(i,oe),e(oe,ke),e(ke,Ut),e(oe,Jt),e(oe,Ue),e(Ue,te),e(te,et),e(et,qt),e(te,zt),e(te,tt),e(tt,Ht),e(te,Yt),e(te,Ee),e(Ee,Ft),e(Ee,Ie),e(Ie,Kt),e(Ee,Wt),e(te,Qt),e(te,F),e(F,Xt),e(F,Zt),e(F,es),e(F,ts),e(F,ss),e(F,st),e(st,ns),e(F,is),e(F,ls),e(F,rs),e(F,as),e(F,V),e(V,nt),e(nt,os),e(V,ds),e(V,it),e(it,cs),e(V,us),e(V,lt),e(lt,hs),e(V,fs),e(V,Ae),e(Ae,ms),e(Ae,Je),e(Je,ps),e(Ae,bs),e(V,_s),e(V,rt),e(rt,gs),e(V,vs),e(V,ws),e(V,ys),e(V,ks),e(V,at),e(at,Es),e(V,Is),e(V,As),e(V,Ds),e(V,Vs),e(V,W),e(W,ot),e(ot,Ts),e(W,$s),e(W,dt),e(dt,xs),e(W,Ls),e(W,ct),e(ct,Ns),e(W,Ps),e(W,De),e(De,Bs),e(De,qe),e(qe,Cs),e(De,Rs),e(W,Ss),e(W,ut),e(ut,js),e(V,Os),e(V,Ms),e(V,Gs),e(V,Us),e(V,pe),e(pe,Ve),O&&ft(O,Ve,null),e(pe,Js),e(pe,Te),M&&ft(M,Te,null),$e=!0,qs||(Qs=[U(mi,"keydown",n[18]),U(b,"input",n[21]),U(b,"change",n[15]),U(R,"input",n[22]),U(R,"change",n[11]),U(J,"input",n[23]),U(J,"change",n[11]),U(L,"input",n[24]),U(L,"change",n[11]),U(q,"change",n[25]),U(me,"change",n[26]),U(ye,"click",n[12]),U(ke,"click",n[27])],qs=!0)},p(f,D){if(D[0]&64&&b.value!==f[6]&&_e(b,f[6]),D[0]&1&&Ye(R.value)!==f[0]&&_e(R,f[0]),(!$e||D[0]&1)&&Zn(Re,f[0]),(!$e||D[0]&1)&&o(J,"max",f[0]),D[0]&2&&Ye(J.value)!==f[1]&&_e(J,f[1]),f[10]?K||(K=qn(),K.c(),K.m(h,null)):K&&(K.d(1),K=null),D[0]&128&&Ye(L.value)!==f[7]&&_e(L,f[7]),D[0]&256&&(q.checked=f[8]),(!$e||D[0]&128&&pt!==(pt="This is for the use case that if you for example assign tasks to a user, that a single user should not have more than one task. If this toggle is enabled, any new random value which would be within a group of "+f[7]+" which already has an assignment will be discarded."))&&o(re,"data-tip",pt),D[0]&32&&(me.checked=f[5]),f[3]?z?z.p(f,D):(z=zn(f),z.c(),z.m(ee,bt)):z&&(z.d(1),z=null),f[9].length>0?H?H.p(f,D):(H=Hn(f),H.c(),H.m(ee,null)):H&&(H.d(1),H=null),D[0]&512){xe=f[9];let B;for(B=0;B<xe.length;B+=1){const Pe=Jn(f,xe,B);C[B]?(C[B].p(Pe,D),ge(C[B],1)):(C[B]=Yn(Pe),C[B].c(),ge(C[B],1),C[B].m(i,_t))}for(Ys(),B=xe.length;B<C.length;B+=1)si(B);Hs()}f[9].length>0?Y?Y.p(f,D):(Y=Fn(f),Y.c(),Y.m(i,gt)):Y&&(Y.d(1),Y=null);const ue={};if(D[1]&8&&(ue.$$scope={dirty:D,ctx:f}),Le!==(Le=f[2])){if(O){Ys();const B=O;Be(B.$$.fragment,1,0,()=>{mt(B,1)}),Hs()}Le?(O=new Le(Xs(f)),ht(O.$$.fragment),ge(O.$$.fragment,1),ft(O,Ve,null)):O=null}else Le&&O.$set(ue);const G={};if(D[1]&8&&(G.$$scope={dirty:D,ctx:f}),Ne!==(Ne=f[2])){if(M){Ys();const B=M;Be(B.$$.fragment,1,0,()=>{mt(B,1)}),Hs()}Ne?(M=new Ne(Zs(f)),ht(M.$$.fragment),ge(M.$$.fragment,1),ft(M,Te,null)):M=null}else Ne&&M.$set(G);D[0]&16&&ve(oe,"collapse-open",f[4])},i(f){if(!$e){for(let D=0;D<xe.length;D+=1)ge(C[D]);O&&ge(O.$$.fragment,f),M&&ge(M.$$.fragment,f),$e=!0}},o(f){C=C.filter(Boolean);for(let D=0;D<C.length;D+=1)Be(C[D]);O&&Be(O.$$.fragment,f),M&&Be(M.$$.fragment,f),$e=!1},d(f){f&&a(s),K&&K.d(),z&&z.d(),H&&H.d(),Fs(C,f),Y&&Y.d(),O&&mt(O),M&&mt(M),qs=!1,ei(Qs)}}}function Kn(n,s,t){let i=new Blob([n],{type:t}),c=document.createElement("a");c.download=s,c.href=window.URL.createObjectURL(i),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}function gi(n,s,t){let i,v,m=!1,I=!1,b=!0,A,E,h=30,k=5,u=3,x=!1,j=[],ne=()=>{h<1&&t(0,h=1),k>h&&t(1,k=h),k<1&&t(1,k=1),u>=h/k&&t(7,u=Math.floor(h/k)),u<=1&&t(8,x=!1)},ie=()=>{const N=X();t(9,j=[...j,N]),console.log(N.distribution),console.log(j)},R=()=>{const N=performance.now();for(let $=0;$<100;$++)X(!0);const S=performance.now()-N;console.log(S);const T=performance.now();for(let $=0;$<100;$++)X(!1);const L=performance.now()-T;console.log(L)},Fe=()=>{t(9,j=[]),ce()},le=()=>{A=BigInt(E),Rn(A)},ce=()=>{A=BigInt(Math.floor(Math.random()*2**53)),t(6,E=A.toString()),Rn(A)},X=(N=b)=>{const S={choices:h,assignments:k,seed:A,internal_state:oi(),use_array_based_algorithm:N,multiples_of_n:u,prevent_grouped_assignments:x,distribution:new Map};let T=0;const L=[];for(let $=0;$<h;$++)L.push($);e:for(;T<k;)if(N){let $=Cn(L.length);if(x&&u>1){let Z=L[$]-L[$]%u;for(let q=0;q<u;q++)if(S.distribution.has(Z+q))continue e}S.distribution.set(L[$],T+1),L[$]=L[L.length-1],L.pop(),T++}else{let $=Cn(h);if(!S.distribution.has($)){if(x&&u>1){let Z=$-$%u;for(let q=0;q<u;q++)if(S.distribution.has(Z+q))continue e}S.distribution.set($,T+1),T++}}return S},Ke=()=>{let N="";for(let S=0;S<j.length;S++){let T=j[S],L="",$="";for(let Z=1;Z<T.choices+1;Z++)L+=`"${Z}",`,$+=`"${T.distribution.get(Z)||""}",`;L+=`,seed,choices,assignments,use_array_based_algorithm,multiples_of_n,prevent_grouped_assignments, state
`,$+=`,"${T.seed}","${T.choices}","${T.assignments}","${T.use_array_based_algorithm}","${T.multiples_of_n}","${T.prevent_grouped_assignments}","${T.internal_state}"
`,N+=L+$}Kn(N,"Exported Distributions.csv","text/csv;charset=utf-8;")},Re=()=>{let N=JSON.stringify(j,(S,T)=>typeof T=="bigint"?T.toString():T instanceof Map?Array.from(T.entries()):T);Kn(N,"Exported Distributions.json","application/json;")};function We(N){N.key=="d"&&t(3,m=!m)}ni(async()=>{ce();const N=await Lt(()=>import("../chunks/index-91452a10.js"),["chunks/index-91452a10.js","chunks/index-28df49c0.js"]);await Lt(()=>import("../chunks/prism-c-0e5c38f7.js"),[]),await Lt(()=>import("../chunks/index-2bcea5bc.js"),[]),await Lt(()=>import("../chunks/prism-line-highlight-516722bc.js"),[]),t(2,v=N.default)});function Qe(){E=this.value,t(6,E)}function J(){h=Ye(this.value),t(0,h)}function Xe(){k=Ye(this.value),t(1,k)}function Ze(){u=Ye(this.value),t(7,u)}function he(){x=this.checked,t(8,x)}function re(){b=this.checked,t(5,b)}const fe=()=>{t(4,I=!I)};return n.$$.update=()=>{n.$$.dirty[0]&3&&t(10,i=h>=5e3&&k>=4e3)},[h,k,v,m,I,b,E,u,x,j,i,ne,ie,R,Fe,le,Ke,Re,We,!0,!0,Qe,J,Xe,Ze,he,re,fe]}class yi extends Wn{constructor(s){super(),Qn(this,s,gi,_i,Xn,{prerender:19,hydrate:20},null,[-1,-1])}get prerender(){return this.$$.ctx[19]}get hydrate(){return this.$$.ctx[20]}}export{yi as default};
